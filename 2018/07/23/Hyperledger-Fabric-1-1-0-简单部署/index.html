<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><title>Hyperledger Fabric 1.1.0 简单部署 | 赵子骞COVER的BLOG</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="minfive"><meta name="keywords" content="hyperledger,fabric,java,sdk,区块链,程序员,成都,全栈开发"><meta name="description" content="用于分享学习心得"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://zhaoziqian.top/2018/07/23/Hyperledger-Fabric-1-1-0-简单部署/index.html"><link rel="icon" type="image/png" href="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-6-15/24220424.jpg" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="赵子骞COVER的BLOG"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2a02136cd88131656f94a672794927c2";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(http://oo12ugek5.bkt.clouddn.com/blog/images/loader.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="赵子骞COVER的BLOG" alt="赵子骞COVER的BLOG"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-6-15/23498132.jpg" alt="赵子骞COVER的BLOG"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="首页" title="首页">首页</a></li><li class="nav__item"><a href="/archives" alt="归档" title="归档">归档</a></li><li class="nav__item"><a href="/about" alt="关于" title="关于">关于</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-6-20/56175974.jpg" alt="Hyperledger Fabric 1.1.0 简单部署"></div><header class="post__info"><h1 class="post__title">Hyperledger Fabric 1.1.0 简单部署</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="https://www.github.com/zhaoziqian">zhaoziqian</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2018-07-23</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/Hyperledger-fabric/">Hyperledger Fabric</a></li><li class="mark__item"><a href="/tags/区块链/">区块链</a></li></ul></div></div></header><div class="post__content"><h3 id="Hyperledger-Fabric-1-1-0-简单部署"><a href="#Hyperledger-Fabric-1-1-0-简单部署" class="headerlink" title="Hyperledger Fabric 1.1.0 简单部署"></a>Hyperledger Fabric 1.1.0 简单部署</h3><h4 id="目标：快速启动一个fabric环境"><a href="#目标：快速启动一个fabric环境" class="headerlink" title="目标：快速启动一个fabric环境"></a>目标：快速启动一个fabric环境</h4><h4 id="使用环境：-centos7-最小系统"><a href="#使用环境：-centos7-最小系统" class="headerlink" title="使用环境： centos7 最小系统"></a>使用环境： centos7 最小系统</h4><h4 id="一、安装环境需求软件"><a href="#一、安装环境需求软件" class="headerlink" title="一、安装环境需求软件"></a>一、安装环境需求软件</h4><table><thead><tr><th>是否必须</th><th>软件名</th><th>版本</th><th>描述</th></tr></thead><tbody><tr><td></td><td>curl</td><td></td><td>手动编译时候，可能需要用这个命令下载</td></tr><tr><td></td><td>git</td><td></td><td>拉代码用</td></tr><tr><td>必须</td><td>docker</td><td>1.14+</td><td></td></tr><tr><td>必须</td><td>docker-compose</td><td></td><td></td></tr><tr><td></td><td>golang</td><td>1.10x+</td><td>编译镜像、工具需要</td></tr><tr><td></td><td>node.js</td><td>8.9x+</td><td>编译镜像、工具需要</td></tr><tr><td></td><td>npm</td><td></td><td></td></tr><tr><td></td><td>libtool</td><td></td><td>编译镜像、工具需要</td></tr><tr><td></td><td>libtool-ltdl-devel</td><td></td><td>编译镜像、工具需要</td></tr></tbody></table><hr><p><span style="font-size:30px"><strong>文档描述</strong></span></p><p>此次部署文档，不使用自己编译镜像和工具的方法。<br><br><br>编译的时候只需要将上面软件安装全，在工程目录执行 make docker，中间可能会出错，一般情况是因为被墙超时，或者资源地址有变动了需要自己找，所以会碰到很多意外。所以使用自己编译的方法总觉得不是很稳。需要对linux操作系统比较熟悉，而且需要多多阅读fabric源码一个个去解决问题。<br><br><br>然而我们简单使用和开发fabric区块链网络，基本是不需要修改基础节点。所以我们只要下载到基础的docker镜像，证书生成，描述文件生成工具，就可以启动区块链网络。<br><br></p><p>但是本次文档的基础版本是基于 github上 ++<strong><em>v1.1.0-rc1 - March 1, 2018</em></strong>++ 版本</p><hr><ol><li>安装docker</li></ol><p>执行使用 yum 命令安装的 docker 经过测试也是可以使用的。但是版本是1.13 fabric官网给的建议是使用1.14以上版本。具体方法如下：</p><p>docker <a href="https://docs.docker.com/install/linux/docker-ce/centos/#set-up-the-repository" target="_blank" rel="noopener">官网安装文档</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#  移除原有docker，新系统可定是不用操作的</span><br><span class="line">$ yum remove docker \</span><br><span class="line">      docker-client \</span><br><span class="line">      docker-client-latest \</span><br><span class="line">      docker-common \</span><br><span class="line">      docker-latest \</span><br><span class="line">      docker-latest-logrotate \</span><br><span class="line">      docker-logrotate \</span><br><span class="line">      docker-selinux \</span><br><span class="line">      docker-engine-selinux \</span><br><span class="line">      docker-engine</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line"># 添加docker软件源</span><br><span class="line">$ yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">$ yum install docker-ce</span><br></pre></td></tr></table></figure><p>此时就开始安转docker客户端，但是安装过程很缓慢，通过查阅docker-ce.repo 文件，找到软件包下载地址<br><a href="https://download.docker.com/linux/centos/7/x86_64/stable/Packages/" target="_blank" rel="noopener">https://download.docker.com/linux/centos/7/x86_64/stable/Packages/</a><br>我们就可以访问这个地址，使用迅雷什么的下载工具将对应的软件包下载下来。然后安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ yum localinstall -y /packages/docker-ce/*.rpm --nogpgcheck</span><br><span class="line">$ docker version</span><br><span class="line"></span><br><span class="line">Client:</span><br><span class="line"> Version:	18.03.0-ce</span><br><span class="line"> API version:	1.37</span><br><span class="line"> Go version:	go1.9.4</span><br><span class="line"> Git commit:	0520e24</span><br><span class="line"> Built:	Wed Mar 21 23:09:15 2018</span><br><span class="line"> OS/Arch:	linux/amd64</span><br><span class="line"> Experimental:	false</span><br><span class="line"> Orchestrator:	swarm</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:	18.03.0-ce</span><br><span class="line">  API version:	1.37 (minimum version 1.12)</span><br><span class="line">  Go version:	go1.9.4</span><br><span class="line">  Git commit:	0520e24</span><br><span class="line">  Built:	Wed Mar 21 23:13:03 2018</span><br><span class="line">  OS/Arch:	linux/amd64</span><br><span class="line">  Experimental:	false</span><br></pre></td></tr></table></figure><p>如此安装完毕，然后还需要关闭防火墙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 关闭防火墙</span><br><span class="line">$ systemctl stop firewalld</span><br><span class="line">$ systemctl disable firewalld</span><br><span class="line"></span><br><span class="line"># 关闭selinux</span><br><span class="line"># 查看selinux状态 </span><br><span class="line">$ /usr/sbin/sestatus -v</span><br><span class="line">SELinux status:                 enabled</span><br><span class="line">SELinuxfs mount:                /sys/fs/selinux</span><br><span class="line">....略</span><br><span class="line"></span><br><span class="line">$ sed -ri &quot;s/^SELINUX=enforcing.*/SELINUX=disabled/&quot; /etc/selinux/config</span><br><span class="line"># 重启后再次查看</span><br><span class="line">$ reboot</span><br><span class="line">$ /usr/sbin/sestatus -v</span><br><span class="line">SELinux status:                 disabled</span><br></pre></td></tr></table></figure><p><br></p><ol start="2"><li>安装docker-compose</li></ol><p>可以直接去github上下载， <a href="https://github.com/docker/compose/releases/tag/1.22.0-rc1" target="_blank" rel="noopener">https://github.com/docker/compose/releases/tag/1.22.0-rc1</a>，有linux ，mac ，windows 三个版本。</p><p>linux的可以直接使用迅雷下载这个连接 <a href="https://github.com/docker/compose/releases/download/1.22.0-rc1/docker-compose-Linux-x86_64" target="_blank" rel="noopener">https://github.com/docker/compose/releases/download/1.22.0-rc1/docker-compose-Linux-x86_64</a>，这个下载完后上传到虚拟机里，给文件改名称 docker-compose</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 把docker-compose 移动到bin目录</span><br><span class="line">$ mv ./docker-compose /usr/local/bin</span><br><span class="line">$ chmod +x /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line"># 查看docker-compose 版本</span><br><span class="line">$ docker-compose -v</span><br><span class="line">docker-compose version 1.22.1, build 5d8c71b</span><br></pre></td></tr></table></figure><hr><h4 id="二、获取hyperledger-fabric"><a href="#二、获取hyperledger-fabric" class="headerlink" title="二、获取hyperledger fabric"></a>二、获取hyperledger fabric</h4><ol><li>获取hyperledger fabric 源码</li></ol><p>获取源码就比较简单了，直接使用git工具clone下来就可以。但是有些时候我们使用github克隆代码会很缓慢，这里介绍一个小技巧。我们可以通过国内的git平台，如码云，先将项目克隆到码云，然后再从码云克隆，这样可以大大提升代码克隆速度。</p><p>hyperledger fabric github地址为： <a href="https://github.com/hyperledger/fabric" target="_blank" rel="noopener">https://github.com/hyperledger/fabric</a><br><br><br><br></p><ol start="2"><li>获取fabric docker 镜像</li></ol><p>此时就需要使用docker命令拉取fabric基础镜像。具体需要拉取的镜像，其实都在fabric项目提供的脚本中有写到。可以从github上克隆代码查看，或者直接在github上查看。</p><p>../fabric_1.1.0-rc1/fabric-1.1.0-rc1/scripts/bootstrap-1.1.0-preview.sh</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 运行上述目录下的脚本,即可获得1.1.0版本的fabric所需镜像，同时也会下载fabric对应需要的命令行工具</span><br><span class="line"># sh ./bootstrap-1.1.0-preview.sh</span><br></pre></td></tr></table></figure><p>bootstrap-1.1.0-preview.sh</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#</span><br><span class="line"># Copyright IBM Corp. All Rights Reserved.</span><br><span class="line">#</span><br><span class="line"># SPDX-License-Identifier: Apache-2.0</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">export VERSION=1.1.0-preview</span><br><span class="line">export ARCH=$(echo &quot;$(uname -s|tr &apos;[:upper:]&apos; &apos;[:lower:]&apos;|sed &apos;s/mingw64_nt.*/windows/&apos;)-$(uname -m | sed &apos;s/x86_64/amd64/g&apos;)&quot; | awk &apos;&#123;print tolower($0)&#125;&apos;)</span><br><span class="line">#Set MARCH variable i.e ppc64le,s390x,x86_64,i386</span><br><span class="line">MARCH=`uname -m`</span><br><span class="line"></span><br><span class="line">dockerFabricPull() &#123;</span><br><span class="line">  local FABRIC_TAG=$1</span><br><span class="line">  for IMAGES in peer orderer couchdb ccenv javaenv kafka zookeeper tools; do</span><br><span class="line">      echo &quot;==&gt; FABRIC IMAGE: $IMAGES&quot;</span><br><span class="line">      echo</span><br><span class="line">      docker pull hyperledger/fabric-$IMAGES:$FABRIC_TAG</span><br><span class="line">      docker tag hyperledger/fabric-$IMAGES:$FABRIC_TAG hyperledger/fabric-$IMAGES</span><br><span class="line">  done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dockerCaPull() &#123;</span><br><span class="line">      local CA_TAG=$1</span><br><span class="line">      echo &quot;==&gt; FABRIC CA IMAGE&quot;</span><br><span class="line">      echo</span><br><span class="line">      docker pull hyperledger/fabric-ca:$CA_TAG</span><br><span class="line">      docker tag hyperledger/fabric-ca:$CA_TAG hyperledger/fabric-ca</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">: $&#123;CA_TAG:=&quot;$MARCH-$VERSION&quot;&#125;</span><br><span class="line">: $&#123;FABRIC_TAG:=&quot;$MARCH-$VERSION&quot;&#125;</span><br><span class="line"></span><br><span class="line">echo &quot;===&gt; Downloading platform binaries&quot;</span><br><span class="line">curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/$&#123;ARCH&#125;-$&#123;VERSION&#125;/hyperledger-fabric-$&#123;ARCH&#125;-$&#123;VERSION&#125;.tar.gz | tar xz</span><br><span class="line"></span><br><span class="line">echo &quot;===&gt; Pulling fabric Images&quot;</span><br><span class="line">dockerFabricPull $&#123;FABRIC_TAG&#125;</span><br><span class="line"></span><br><span class="line">echo &quot;===&gt; Pulling fabric ca Image&quot;</span><br><span class="line">dockerCaPull $&#123;CA_TAG&#125;</span><br><span class="line">echo</span><br><span class="line">echo &quot;===&gt; List out hyperledger docker images&quot;</span><br><span class="line">docker images | grep hyperledger*</span><br></pre></td></tr></table></figure><p>获得的镜像信息如下</p><table><thead><tr><th>镜像名称</th><th>用途</th></tr></thead><tbody><tr><td>hyperledger/fabric-peer:x86_64-1.1.0</td><td>peer模块镜像文件</td></tr><tr><td>hyperledger/fabric-orderer:x86_64-1.1.0</td><td>orderer节点镜像文件</td></tr><tr><td>hyperledger/fabric-ca:x86_64-1.1.0</td><td>ca模块镜像文件</td></tr><tr><td>hyperledger/fabric-tools:x86_64-1.1.0</td><td>相关工具镜像文件，包含了cryptogen、configtxgen、configtxlator等工具</td></tr><tr><td>hyperledger/fabric-javaenv:x86_64-1.1.0</td><td>java版本的chaincode运行环境镜像文件</td></tr><tr><td>hyperledger/fabric-ccenv:x86_64-1.1.0</td><td>go语言版本的chaincode运行环境镜像文件</td></tr><tr><td>hyperledger/fabric-couchdb:x86_64-0.4.6</td><td>couchdb数据库镜像文件</td></tr><tr><td>hyperledger/fabric-kafka:x86_64-0.4.6</td><td>kafka镜像文件</td></tr><tr><td>hyperledger/fabric-zookeeper:x86_64-0.4.6</td><td>zookeeper 镜像文件</td></tr><tr><td>hyperledger/fabric-baseos:x86_64-0.4.6</td><td>基础镜像文件,其他镜像文件在该文件镜像基础上生成</td></tr></tbody></table><p>下载到这些docker镜像就可以启动一个fabric网络了</p><hr><h4 id="三、启动一个fabric网络"><a href="#三、启动一个fabric网络" class="headerlink" title="三、启动一个fabric网络"></a>三、启动一个fabric网络</h4><p>fabric提供了简单的启动区块链网络的脚本，用来验证和学习。</p><p>../fabric_1.1.0-rc1/fabric-1.1.0-rc1/examples/e2e_cli 目录下是一个简单区块链网络启动脚本，此应用案例是学习区块链网络的最好开始。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 进入到上述目录</span><br><span class="line"></span><br><span class="line"># sh ./network_setup.sh up      --启动区块链网络</span><br><span class="line"></span><br><span class="line"># sh ./network_setup.sh down    --停止区块链网络</span><br><span class="line"></span><br><span class="line"># sh ./network_setup.sh restart --重启区块链网络</span><br></pre></td></tr></table></figure><p>此目录文件结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── base                                </span><br><span class="line">│   ├── docker-compose-base.yaml                -- 启动节点的基础配置</span><br><span class="line">│   └── peer-base.yaml                          -- peer节点的基础配置</span><br><span class="line">├── channel-artifacts                           -- 存放通道描述文件的目录</span><br><span class="line">├── configtx.yaml                               -- 通道节点信息配置文件</span><br><span class="line">├── crypto-config.yaml                          -- 组织证书描述配置文件</span><br><span class="line">├── docker-compose-cli.yaml                     -- cli启动docker描述文件</span><br><span class="line">├── docker-compose-couch.yaml</span><br><span class="line">├── docker-compose-e2e-template.yaml</span><br><span class="line">├── docker-compose-e2e.yaml</span><br><span class="line">├── docker-compose-e2e.yamlt</span><br><span class="line">├── download-dockerimages.sh</span><br><span class="line">├── end-to-end.rst</span><br><span class="line">├── examples</span><br><span class="line">│   └── chaincode</span><br><span class="line">│       └── go</span><br><span class="line">│           └── chaincode_example02</span><br><span class="line">│               └── chaincode_example02.go      -- 案例中使用的智能合约</span><br><span class="line">├── generateArtifacts.sh                        -- 生成证书文件的脚本</span><br><span class="line">├── network_setup.sh                            -- 启停案例的脚本</span><br><span class="line">└── scripts</span><br><span class="line">    └── script.sh                               -- 启动cli容器后执行的脚本</span><br></pre></td></tr></table></figure><p>这些文件中写的命令都比较简单，只要大家稍加阅读。</p><p>可能会在启动中遇到的问题</p><ol><li>没有找到生成配置文件的工具 cryptogen、configtxgen、configtxlator 这些。此时就需要读者去确认，执行bootstrap-1.1.0-preview.sh这个脚本，有没有正确的完整执行完。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/$&#123;ARCH&#125;-$&#123;VERSION&#125;/hyperledger-fabric-$&#123;ARCH&#125;-$&#123;VERSION&#125;.tar.gz | tar xz</span><br><span class="line"></span><br><span class="line">-- 脚本文件中，这条命令就是下载上述工具的命令，有时候会因为网络原因下载缓慢，读者可以自行将命令中变量补全，用其他下载工具下载。</span><br></pre></td></tr></table></figure><p>然后再确认 generateArtifacts.sh 脚本中获得上述命令行工具的地址，和你下载存放的地址是否对应。</p><ol start="2"><li>也可能在启动过程中 遇到一个 docker network的问题，这个问题是在 ./base/peer-base.yaml 中一个配置的原因。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># Copyright IBM Corp. All Rights Reserved.</span><br><span class="line">#</span><br><span class="line"># SPDX-License-Identifier: Apache-2.0</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">version: &apos;2&apos;</span><br><span class="line">services:</span><br><span class="line">  peer-base:</span><br><span class="line">    image: hyperledger/fabric-peer</span><br><span class="line">    environment:</span><br><span class="line">      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span><br><span class="line">      # the following setting starts chaincode containers on the same</span><br><span class="line">      # bridge network as the peers</span><br><span class="line">      # https://docs.docker.com/compose/networking/</span><br><span class="line">      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=e2ecli_default        --就这行，修改其值与之对应即可</span><br><span class="line">      #- CORE_LOGGING_LEVEL=ERROR</span><br><span class="line">      - CORE_LOGGING_LEVEL=DEBUG</span><br><span class="line">      - CORE_PEER_TLS_ENABLED=true</span><br><span class="line">      - CORE_PEER_GOSSIP_USELEADERELECTION=true</span><br><span class="line">      - CORE_PEER_GOSSIP_ORGLEADER=false</span><br><span class="line">      - CORE_PEER_PROFILE_ENABLED=true</span><br><span class="line">      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt</span><br><span class="line">      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key</span><br><span class="line">      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt</span><br><span class="line">    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer</span><br><span class="line">    command: peer node start</span><br></pre></td></tr></table></figure><div class="post-announce">感谢您的阅读，本文由 <a href="https://www.github.com/zhaoziqian">zhaoziqian</a> 原创提供。如若转载，请注明出处：zhaoziqian（<a href="https://www.github.com/zhaoziqian">https://www.github.com/zhaoziqian</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/2018/06/20/fabric-sdk-node-日志等级设置/" title="fabric-sdk-node 日志等级设置"><i class="iconfont icon-prev"></i>fabric-sdk-node 日志等级设置</a></div><div class="post__prev post__prev--right"><a href="/2018/07/23/转-Java8-十大新特性详解/" title="(转)Java8 十大新特性详解">(转)Java8 十大新特性详解<i class="iconfont icon-next"></i></a></div></div></div></article><div id="comment-container"></div></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">用于分享学习心得</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/学习分享/">学习分享</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/区块链/">区块链</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/中间件/">中间件</a><span class="block-list-count">3</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/mac系统/">mac系统</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/java/">java</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/git/">git</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Java8/">Java8</a><span class="block-list-count">1</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2018/08/01/activeMQ集群搭建-Master-Slave模式/" title="activeMQ集群搭建 Master - Slave模式"><div class="item__cover"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-8-1/76197151.jpg" alt="activeMQ集群搭建 Master - Slave模式"></div><div class="item__info"><h3 class="item__title">activeMQ集群搭建 Master - Slave模式</h3><span class="item__text">2018-08-01</span></div></a></li><li class="latest-post-item"><a href="/2018/08/01/Zookeeper数据查看工具ZooInspector/" title="Zookeeper数据查看工具ZooInspector"><div class="item__cover"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-8-1/66576138.jpg" alt="Zookeeper数据查看工具ZooInspector"></div><div class="item__info"><h3 class="item__title">Zookeeper数据查看工具ZooInspector</h3><span class="item__text">2018-08-01</span></div></a></li><li class="latest-post-item"><a href="/2018/08/01/zookeeper集群搭建/" title="zookeeper集群搭建"><div class="item__cover"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-8-1/66576138.jpg" alt="zookeeper集群搭建"></div><div class="item__info"><h3 class="item__title">zookeeper集群搭建</h3><span class="item__text">2018-08-01</span></div></a></li><li class="latest-post-item"><a href="/2018/07/27/代码分层/" title="代码分层"><div class="item__cover"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-7-27/63359406.jpg" alt="代码分层"></div><div class="item__info"><h3 class="item__title">代码分层</h3><span class="item__text">2018-07-27</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/Hyperledger-fabric/">Hyperledger fabric</a></li><li class="tag-item"><a class="tag-link" href="/tags/Java8/">Java8</a></li><li class="tag-item"><a class="tag-link" href="/tags/activemq/">activemq</a></li><li class="tag-item"><a class="tag-link" href="/tags/brew/">brew</a></li><li class="tag-item"><a class="tag-link" href="/tags/centos7/">centos7</a></li><li class="tag-item"><a class="tag-link" href="/tags/git/">git</a></li><li class="tag-item"><a class="tag-link" href="/tags/helloworld/">helloworld</a></li><li class="tag-item"><a class="tag-link" href="/tags/hexo/">hexo</a></li><li class="tag-item"><a class="tag-link" href="/tags/java/">java</a></li><li class="tag-item"><a class="tag-link" href="/tags/mac/">mac</a></li><li class="tag-item"><a class="tag-link" href="/tags/node-js/">node.js</a></li><li class="tag-item"><a class="tag-link" href="/tags/test/">test</a></li><li class="tag-item"><a class="tag-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-item"><a class="tag-link" href="/tags/中间件/">中间件</a></li><li class="tag-item"><a class="tag-link" href="/tags/代码规范/">代码规范</a></li><li class="tag-item"><a class="tag-link" href="/tags/区块链/">区块链</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">关于</h3><div class="item__content"><p class="item__text">本站是基于 Hexo 搭建的静态资源博客，主要用于分享日常学习、生活及工作的一些心得总结。</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Chengdu, SiChuan Province, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>zhaoziqian0627@163.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="http://zhaoziqian0627.oss-cn-beijing.aliyuncs.com/18-6-15/4866132.jpg" alt="logo" title="赵子骞COVER的BLOG"></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/zhaoziqian" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:zhaoziqian0627@163.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="/js/md5.min.js"></script><script>var tags=["Hyperledger fabric","区块链"],gitalk=new Gitalk({clientID:"ddfda99f5f4143d63f18",clientSecret:"8f853f94e069021deadd0ca3853921305043b19b",repo:"zhaoziqian.github.io",owner:"zhaoziqian",admin:["zhaoziqian"],labels:tags,id:new Date(153232883e4).getTime()>new Date("2018-02-15").getTime()?md5(location.href):location.href});gitalk.render("comment-container")</script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>